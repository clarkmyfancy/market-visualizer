<div class="chart">
  <div class="chart-top">
    <div class="chart-title">
      <span class="label">Asset</span>
      <span class="value">{{ marketService.selectedAsset()?.name ?? '—' }}</span>
    </div>

    <div class="range" role="tablist" aria-label="Time range">
      @for (r of ranges; track r.value) {
        <button
          type="button"
          class="range-btn"
          role="tab"
          (click)="setRange(r.value)"
          [class.active]="marketService.range() === r.value">
          {{ r.label }}
        </button>
      }
    </div>
  </div>

  <div class="chart-viewport">
    <div class="overlay" [class.visible]="marketService.isLoading()">Loading…</div>
    <div class="overlay error" [class.visible]="!!marketService.error()">
      {{ marketService.error() }}
    </div>

    <div #chartContainer class="svg-host"></div>
  </div>
</div>
